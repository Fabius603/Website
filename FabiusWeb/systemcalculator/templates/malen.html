{% load static%}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-color" content="#cecece">
        <base href="~/" />
        <link rel="stylesheet" href="{% static 'css/icons.css' %}">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/flextables_uc.css' %}">
        <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
        <script src="{% static 'js/vendor/modernizr-3.7.1.min.js' %}"></script>
        <script src="{% static 'js/vendor/plugins.js' %}"></script>
        <script src="{% static 'js/vendor/js.cookie.js' %}"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
        <title>Malen</title>
        
        <style>
            #canvas {
                position: relative;
                margin-right: auto;
                margin-left: auto;
                border: 3px solid rgb(0, 0, 0);
                background-color: grey;
                margin-bottom: 0px;
                z-index: 0;
            }
            .tools {
                position: relative;
                margin-left: auto;
                margin-right: auto;
                background-color: #66CDAA;
                cursor: pointer;
                outline: none;
                border-radius: 10px;
                box-shadow: 0 5px #999; 
                border: none;
                width: 150px;
                color: white;
                font-size: 20px;
                transition: 0.3s;
            }
            .tools span {
                position: relative;
                transition: 0.3s;
                padding-left: 20px;
                padding-right: 20px;
                padding-top: 5px;
                padding-bottom: 5px;
            }
            .tools span:after {
                position: absolute;
                content: '\2261';
                opacity: 0;
                right: -10px;
                transition: 0.3s;
            }
            .tools:hover {
                transform: scale(1.1);
                transition: 0.3s;
            }
            .tools:hover span {
                padding-right: 30px;
                padding-left: 0px;
            }
            .tools:hover span:after {
                opacity: 1;
                right: 0;
            }
            .tools:active {
                transform: translateY(3px);
                box-shadow: 0 2px #666;
            }
            #currentpos {
                position: relative;
                left: 51%
            }
            #clearcanvas {
                position: relative;
                left:50%;
                background-color: transparent;
                cursor: pointer;
                outline: none;
                border-radius: 6px;
                border: solid lightgray 1px;
                color: white;
                transition: 0.3s;
            }
            #clearcanvas:hover {
                background-color: lightgray;
                color: black;
                transition: 0.3s;
            }
            #clearcanvas:active {
                transform: scale(0.9,0.9);
                transition: 0.3s;
            }
            .buttonsUnterCanvas {
                position: relative;
                left:60%;
                background-color: transparent;
                cursor: pointer;
                outline: none;
                border-radius: 6px;
                border: solid lightgray 1px;
                color: white;
                transition: 0.3s;
            }
            .buttonsUnterCanvas:hover {
                background-color: lightgray;
                color: black;
                transition: 0.3s;
            }
            .buttonsUnterCanvas:active {
                transform: scale(0.9,0.9);
                transition: 0.3s;
            }
            #zeichnenoptions_div {
                position: absolute;
                z-index: 100;
                clear: both;
            }
            #radieroptions_div {
                position: absolute;
                z-index: 100;
                clear: both;
            }
            #formenoptions_div {
                position: absolute;
                z-index: 100;
                clear: both;
            }
            #schriftgröße {
                width: 94%;
                font-size: 16px;
                margin-top: 5px;
                margin-left: 5px;
                margin-right: 5px;
                margin-bottom: 5px;
                background-color: #66CDAA;
                border: solid black 1px;
            }
            #radiergröße {
                width: 94%;
                font-size: 16px;
                margin-top: 5px;
                margin-left: 5px;
                margin-right: 5px;
                margin-bottom: 5px;
                background-color: #66CDAA;
                border: solid black 1px;
            }
            .formButtons {
                margin-left: 5px;
                margin-right: 5px;
                width: 94%;
                font-size: 15px;
                background-color: #66CDAA;
                border: solid black 1px;
                font-weight: bold;
                cursor: pointer;
            }
            .formButtons:hover {
                transform: scale(1.1);
                background-color: #5d9785;
            }
            .formButtons:active {
                transform: scale(1.2);
                background-color: #8aaca1;
            }
            .tabelle {
                width: 100%;
            }
            ::placeholder {
                color: black;
            }
            .colorbuttons {
                width: 25px;
                border: none;
                color: transparent;
                border-radius: 10px;
                padding-top: 1.25px;
                padding-bottom: 1.25px;
                padding-left: 1.25px;
                padding-right: 1.25px;
                margin-top: 5px;
                margin-left: 5px;
                margin-right: 5px;
                margin-bottom: 5px;
            }
            .colorbuttons:hover {
                transform: scale(1.25, 1.25);
                border: var(--button-animation-border);
                border-color: var(--button-animation-borderColor);
                border-width: var(--button-animation-borderWidth);
            }
            #canvasEbene2 {
                position: absolute;
                background-color: transparent;
                z-index: var(--canvas2-z-index);
            }
            #sidebar {
                position: absolute;
                z-index: 99;
                width: 3%;
                height: 600px;
                background-color: #999;
                margin-top: var(--sidebar-top);
                transition: 0.5s;
            }
            #sidebar:hover {
                width: 15%;
            }
            #sidebar:hover > .sidebar-container {
                left: 0;
            }
            .sidebar-container {
                transition: 0.5s;
                position: fixed;
                display: block;
                background-color: transparent;
                width: 15%;
                left: -12%;
            }
            .sidebar-elements {
                position: relative;
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background-color: transparent;
                border: solid 1px #767676;
                width: 100%;
                text-align: left;
                z-index: 2;
            }
            .sidebar-elements:hover {
                color: white;
                border-color: #66CDAA;
            }
            .sidebar-elements:active {
                color:#66CDAA;
            }
            .sidebar-elements-label {
                position: absolute;
                right: 4.5%;
                display: inline-block;
                padding-top: 10px;
                padding-bottom: 10px;
                background-color: transparent;
                border: none;
                text-align: right;
                border-left: none;
                z-index: 1;
                transition: 0.5s;
            }
            #sidebar-container-2 {
                z-index: 1;
                position: fixed;
                display: block;
                width: 15%;
                left: 15%;
                background-color: #999;
                visibility: hidden;
            }
            .sidebar-elements-container-2 {
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background-color: transparent;
                border: solid 1px #66CDAA;
                width: 100%;
                text-align: left;
                color: transparent;
            }
            .sidebar-elements-container-2:hover {
                transform: scale(1.1);
                transition: 0.3s;
            }
            #sidebar-container-3 {
                z-index: 1;
                position: fixed;
                display: block;
                width: 15%;
                left: 15%;
                background-color: #999;
                visibility: hidden;
                top: var(--sidebar-container-3-top);
            }
            .sidebar-elements-container-3 {
                display: block;
                padding-top: 10px;
                padding-bottom: 10px;
                background-color: #999;
                border: solid 1px #66CDAA;
                width: 100%;
                text-align: left;
                color: white;
            }
            .sidebar-elements-container-3:hover {
                transition: 0.3s;
                color: #66CDAA;
                transform: scale(1.05);
            }
            .sidebar-elements-container-3:active {
                color: #66CDAA;
            }
            .pfeile {
                position: relative;
                border-radius: 6px;
                left:34%;
                background-color: transparent;
                cursor: pointer;
                outline: none;
                margin-left: 10px;
                margin-right: 20px;
                width: 60px;
                border: solid lightgray 1px;
                transition: 0.3s;
            }
            .pfeile span {
                position: relative;
                font-size: 25px;
                color: white;
                transition: 0.3s;
            }
            .pfeile:hover {
                background-color: lightgray;
                transition: 0.3s;
            }
            .pfeile:hover span {
                color: black;
                transition: 0.3s;
            }
            .pfeile:active {
                transform: scale(0.9,0.9);
                transition: 0.3s;
            }
            #goback span {
                left: 0;
                transition: 0.1s;
            }
            #goback:active span{
                position: relative;
                left: -10px;
                transition: 0.1s;
            }
            #goforward span {
                right: 0;
                transition: 0.1s;
            }
            #goforward:active span{
                position: relative;
                right: -10px;
                transition: 0.1s;
            }
            #settingsTable {
                position: absolute;
                border: solid #666 1px;
                background-image: linear-gradient(to bottom, rgba(50,50,50,.99), rgba(78, 78, 78, 0.99));
                color: white;
                box-shadow: 1px 1px 2px black, 0 0 15px grey, 0 0 2px white;
            }
            .settings_th {
                font-size: 25px;
                padding-bottom: 10px;
                text-decoration: underline;
            }
            .settings_td {
                padding-top: 15px;
                padding-bottom: 15px;
                padding-left: 6px;
            }
            .settings_td:hover {
                font-weight: bold;
            }
            .variable {
                text-align: right;
                padding-right: 18px
            }
            #bilderTable {
                position: absolute;
                border: solid #666 1px;
                background-image: linear-gradient(to bottom, rgba(50,50,50,.99), rgba(78, 78, 78, 0.99));
                color: white;
                box-shadow: 1px 1px 2px black, 0 0 15px grey, 0 0 2px white;
            }
            .bilder_th {
                font-size: 25px;
                padding-bottom: 10px;
                text-decoration: underline;
            }
            .bilder {
                width: 120px;
                height: 60px;
                background-color: grey;
                border: none;
            }
        </style>
    </head>

    <body class="theme-dark">
        <div id="zeichnenoptions_div" style="width:15%"></div>
        <div id="radieroptions_div" style="width:15%"></div>
        <div id="formenoptions_div" style="width: 15%"></div>
        <canvas id="canvasEbene2" width="1200" height="600"></canvas>
        <div class="container-page-nofooter container-page-nonavi">
            <header class="container-titlebar" id="head">
                <div>
                    <!-- flex wrapper -->
                    <div>
                        <div>
                            &#8203; <!-- zero-width unicode char to force rendering of the div -->
                        </div>
                        <div>
                            <i class="nf nf-mdi-arrow_left_thick"></i>
                        </div>
                    </div>
                    <div class="pad-sides margin-r-5x">
                        &#8203; <!-- zero-width unicode char to force rendering of the div -->
                    </div>
                    <div>
                        <h1>Fabius</h1>
                    </div>
                    <div>
                        <div id="pageclock"></div>
                        <img src="{% static 'img/OK_Logo_white.png' %}" class="logo">
                    </div>
                </div>
            </header>
            <div class="container-content">
                <nav class="breadcrumb">
                    <div>
                        <span><a href="http://127.0.0.1:700/">home</a><a href="http://127.0.0.1:700/malen">malen</a></span>
                    </div>
                </nav>
                <div id="sidebar" style="position: absolute; ">
                    <div class="sidebar-container">
                        <label class="sidebar-elements-label">&raquo;</label><button class="sidebar-elements js-noMenu" id="hintergrund_btn" onClick="hintergrundAusklappen('klick')" oncontextmenu="hintergrundAusklappen('klick')">Hintergrund</button>
                        <label class="sidebar-elements-label">&raquo;</label><button class="sidebar-elements js-noMenu" id="malennachzahlen_btn" onClick="malennachzahlenActivate()" oncontextmenu="malennachzahlenActivate()">Malennachzahlen</button>
                        <label class="sidebar-elements-label">&raquo;</label><button class="sidebar-elements js-noMenu" id="ansicht_btn" onClick="ansichtAusklappen('klick')" oncontextmenu="ansichtAusklappen('klick')">Ansicht</button>
                        <label class="sidebar-elements-label">&raquo;</label><button class="sidebar-elements js-noMenu">kommt noch</button>
                    </div>
                    <div id="sidebar-container-2">
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: red;"     onCLick="bgChanger('red')"      oncontextmenu="bgChanger('red')">red</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: black;"   onCLick="bgChanger('black')"    oncontextmenu="bgChanger('black')">black</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: green;"   onCLick="bgChanger('green')"    oncontextmenu="bgChanger('green')">green</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: blue;"    onCLick="bgChanger('blue')"     oncontextmenu="bgChanger('blue')">blue</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: yellow;"  onCLick="bgChanger('yellow')"   oncontextmenu="bgChanger('yellow')">yellow</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: white;"   onCLick="bgChanger('white')"    oncontextmenu="bgChanger('white')">white</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: pink;"    onCLick="bgChanger('pink')"     oncontextmenu="bgChanger('pink')">pink</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: orange;"  onCLick="bgChanger('orange')"   oncontextmenu="bgChanger('orange')">orange</button>
                        <button class="sidebar-elements-container-2 js-noMenu" style="background-color: grey;"    onCLick="bgChanger('grey')"     oncontextmenu="bgChanger('grey')">grey</button>
                    </div>
                    <div id="sidebar-container-3">
                        <button class="sidebar-elements-container-3"><span>Gitternetzlinien</span></button>
                    </div>
                </div> 
                <main class="content-full">
                    <h1 class="fixed-headline transition-standard border-and-shadow" id="überschrift">Malen</h1>
                    <div class="full-width flex-left pad-sides">
                        {% csrf_token %}
                        <div class="pad-all-half" style="display:inline-flex; flex:20%"></div>
                        <div class="pad-all-half" style="display:inline-flex; flex:60%" style="align-items: center; justify-content: center">
                            <button id="zeichnen" class="tools js-noMenu" onClick="zeichnenActivate()" oncontextmenu="zeichnenoptionsActivate('left')" onmouseout="zeichnenoptionsActivate('right')"><span>Zeichnen</span></button>
                            <button id="radieren" class="tools js-noMenu" onClick="radierenActivate()" oncontextmenu="radierenoptionsActivate('left')" onmouseout="radierenoptionsActivate('right')"><span>Radierer</span></button>
                            <button id="formen" class="tools js-noMenu" onClick="formenActivate()" oncontextmenu="formenoptionsActivate('left')" onmouseout="formenoptionsActivate('right')"><span>Formen</span></button>
                        </div>
                        <div class="pad-all-half" style="display:inline-flex; flex:20%"></div>
                        <div class="pad-all-half" style="display:inline-flex; flex:100%" style="align-items: center; justify-content: center">
                            <canvas id="canvas" width="1200" height="600"></canvas>
                        </div>
                        <div>
                            <table id="settingsTable">
                                <tr class="settings_tr">
                                    <th class="settings_th" colspan="2"><span>Settings:</span></th>
                                </tr>
                                <tr>
                                    <td class="settings_td"><span>Strichfarbe:</span></td>
                                    <td class="settings_td variable" id="table_strichfarbe"><span></span></td>
                                </tr>
                                <tr>
                                    <td class="settings_td"><span>Strichdicke:</span></td>
                                    <td class="settings_td variable" id="table_strichdicke"><span></span></td>
                                </tr>
                                <tr>
                                    <td class="settings_td"><span>Active Form:</span></td>
                                    <td class="settings_td variable" id="table_activeForm"><span></span></td>
                                </tr>
                                <tr>
                                    <td class="settings_td"><span>Radierdicke:</span></td>
                                    <td class="settings_td variable" id="table_radierdicke"><span></span></td>
                                </tr>
                            </table>
                        </div>
                        <div>
                            <table id="bilderTable">
                                <tr class="bilder_tr">
                                    <th class="bilder_th" colspan="2"><span>Bilder</span></th>
                                </tr>
                                <tr>
                                    <td class="bilder_td"><img class="bilder" id="bilder0"></td>
                                    <td class="bilder_td"><img class="bilder" id="bilder1"></td>
                                </tr>
                                <tr>
                                    <td class="bilder_td"><img class="bilder" id="bilder2"></td>
                                    <td class="bilder_td"><img class="bilder" id="bilder3"></td>
                                </tr>
                                <tr>
                                    <td class="bilder_td"><img class="bilder" id="bilder4"></td>
                                    <td class="bilder_td"><img class="bilder" id="bilder5"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="pad-all-half" style="display:inline-flex; flex:50%">
                            <button class="pfeile" id="goback" onClick="goback()"><span>&lArr;</span></button>
                            <button class="pfeile" id="goforward" onClick="goforward()"><span>&rArr;</span></button>
                            <button id="clearcanvas" onClick="clearCanvas()">clear</button>
                            <button class="buttonsUnterCanvas" onClick="bildschirmFoto()">Bildschirmfoto</button>
                        </div>
                        <div class="pad-all-half" style="display:inline-flex; flex:50%">
                            <label id="currentpos"></label>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <script>
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var zeichnen = false;
            var radieren = false;
            var formen = false;
            var mousedown = false;
            var mousedown_can2 = false;
            var farbe = "red";
            var hintergrundfarbe = "grey"
            var radierdicke = 20;
            var vorherigesx = "";
            var vorherigesy = "";
            var zeichnen_aktive = false;
            var radieren_aktive = false;
            var hoveranimation = {
                zeichnen_button_position: "right",      //position des zeichnen Buttons              
                zeichnen_ausführen: false,    //soll die zeichnen Animation ausgeführt werden
                radieren_button_position: "right",      //position des radieren Buttons              
                radieren_ausführen: false,    //soll die radieren Animation ausgeführt werden
                formen_button_position: "right",      //position des formen Buttons              
                formen_ausführen: false,    //soll die formen Animation ausgeführt werden
            };
            var mausposX;
            var mausposY;
            var mausposX_can2;
            var mausposY_can2;
            var zeichnenIntervall;
            var radierenIntervall;
            var formenIntervall;
            var farbbuttons;
            var xvonAltenZeichnenOptions;
            var yvonAltenZeichnenOptions;
            var xvonAltenRadierOptions;
            var yvonAltenRadierOptions;
            var xvonAltenFormenOptions;
            var yvonAltenFormenOptions;
            var strichdicke = 1;
            var aktuelleForm = "square";
            //canvas2
            var canvas2 = document.getElementById("canvasEbene2");
            var ctx2 = canvas2.getContext("2d");
            var letzteForm = {
                form: "",
                cords: [],
            }
            //malen nach Zahlen
            var zahlenCords = {};
            var abbrechen = false;
            var malennachZahlen = false;
            var randomFarben = ["red", "black", "blue", "green", "purple", "pink", "orange", "grey"];
            var connectNumber = {
                aktuelleNummer: 0,
                NummernAnzahl: "",
            }
            var backups = {
                src: [],
                bg: [],
            };
            var backupPosition;
            var sidebar = document.getElementById("sidebar");
            var besondereForm = {
                start: [],
                aktuellePosition: [],
                positionen: [],
            };
            var canscreens = []
            var hintergrundlist = [];


//--------------------------------------------------
//HTML Elemente erstellen
            function canvas2erstellen() {
                ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                canvas_pos = canvas.getBoundingClientRect();
                $("#canvasEbene2").css('left', canvas_pos.left+3)
                $("#canvasEbene2").css('top', canvas_pos.top+3)
                if(formen == true) {
                    canvas2.style.setProperty('--canvas2-z-index', 3);
                } else {
                    canvas2.style.setProperty('--canvas2-z-index', 0);            
                }
            }
            canvas2erstellen();

            function activeSettings() {
                Tabelle = document.getElementById("settingsTable");
                canvas_pos = canvas.getBoundingClientRect();
                breite = $(window).width()
                tablewidth = breite - (canvas_pos.right+40)

                $(Tabelle).css({top: canvas_pos.top+"px"});
                $(Tabelle).css({left: canvas_pos.right+20+"px"});
                $(Tabelle).css({width: tablewidth+"px"});
                
                $('#table_strichfarbe span').text(farbe);
                $('#table_strichdicke').text(strichdicke);
                $('#table_activeForm').text(aktuelleForm);
                $('#table_radierdicke').text(radierdicke);

                return
            }
            activeSettings();

            function bilderTable() {
                Tabelle = document.getElementById("bilderTable");
                TabelleSettings = document.getElementById("settingsTable")
                canvas_pos = canvas.getBoundingClientRect();
                tabelleSettings_pos = TabelleSettings.getBoundingClientRect();
                breite = $(window).width();
                tablewidth = breite - (canvas_pos.right+40);

                $(Tabelle).css({top: tabelleSettings_pos.bottom+40+"px"});
                $(Tabelle).css({left: canvas_pos.right+20+"px"});
                $(Tabelle).css({width: tablewidth+"px"});
            }
            bilderTable();
//--------------------------------------------------
//tools aktivieren

            function zeichnenActivate() {
                if(zeichnen == true) {
                    zeichnen = false;
                    malennachZahlen = true;
                    $(".tools").css('background-color', '#66CDAA')
                } else {
                    zeichnen = true;
                    radieren = false;
                    formen = false;
                    malennachZahlen = false;
                    $(".tools").css('background-color', '#66CDAA')
                    $("#zeichnen").css('background-color', 'red')
                    canvas2erstellen();
                }
                
            }

            function radierenActivate() {
                if(radieren == true) {
                    radieren = false;
                    malennachZahlen = true;
                    $(".tools").css('background-color', '#66CDAA')
                } else {
                    radieren = true;
                    zeichnen = false;
                    formen = false;
                    malennachZahlen = false;
                    $(".tools").css('background-color', '#66CDAA')
                    $("#radieren").css('background-color', 'red')
                    canvas2erstellen();
                }
            }

            function formenActivate(info) {
                if(formen == true && info != "ohne deaktivieren") {
                    formen = false;
                    malennachZahlen = true;
                    $(".tools").css('background-color', '#66CDAA')
                    canvas2erstellen();
                } else {
                    formen = true;
                    zeichnen = false;
                    radieren = false;
                    malennachZahlen = false;
                    $(".tools").css('background-color', '#66CDAA')
                    $("#formen").css('background-color', 'red')
                    canvas2erstellen();
                }
            }

            function mnZActivate() {
                    malennachZahlen = true;
                    zeichnen = false;
                    formen = false;
                    radieren = false;
                    $(".tools").css('background-color', '#66CDAA')
                    return
            }
            

//--------------------------------------------------
//on hover events

            function zeichnenoptionsActivate(direction) {
                let zeichnen_button = document.getElementById("zeichnen");
                x_Button = zeichnen_button.offsetLeft;
                y_Button = zeichnen_button.offsetTop;
                buttonposition = zeichnen_button.getBoundingClientRect();
                if(direction == "left" && hoveranimation.zeichnen_button_position == "right") {
                    hoveranimation.zeichnen_button_position = "left";
                    hoveranimation.zeichnen_ausführen = true;
                    von = "0px";
                    zu = "-60px";
                    x_Button = zeichnen_button.offsetLeft;
                    y_Button = zeichnen_button.offsetTop;
                    zeichnenIntervall = window.setInterval(zeichnenoptionsActivate, 200);
                    createZeichnenOptions(x_Button, y_Button);
                } 
                else if(hoveranimation.zeichnen_button_position == "left" && inzeichnenoptions(buttonposition) == false) {
                    hoveranimation.zeichnen_button_position = "right";
                    hoveranimation.zeichnen_ausführen = true;
                    von = "-60px";
                    zu = "0px";
                    clearInterval(zeichnenIntervall);
                    deleteZeichnenOptions();
                }
                if(hoveranimation.zeichnen_ausführen == true) {
                    hoveranimation.zeichnen_ausführen = false;
                    zeichnen_button.animate(
                        [
                            {left: von},
                            {left: zu},
                        ],
                            {
                                duration: 130,
                                fill: 'forwards',
                            }
                    );  
                }
                    
            }

            function radierenoptionsActivate(direction) {
                let radieren_button = document.getElementById("radieren");
                x_Button = radieren_button.offsetLeft;
                y_Button = radieren_button.offsetTop;
                buttonposition = radieren_button.getBoundingClientRect();
                if(direction == "left" && hoveranimation.radieren_button_position == "right") {
                    hoveranimation.radieren_button_position = "left";
                    hoveranimation.radieren_ausführen = true;
                    von = "0px";
                    zu = "-60px";
                    x_Button = radieren_button.offsetLeft;
                    y_Button = radieren_button.offsetTop;
                    radierenIntervall = window.setInterval(radierenoptionsActivate, 200);
                    createRadierenOptions(x_Button, y_Button);
                } 
                else if(hoveranimation.radieren_button_position == "left" && inradierenoptions(buttonposition) == false) {
                    hoveranimation.radieren_button_position = "right";
                    hoveranimation.radieren_ausführen = true;
                    von = "-60px";
                    zu = "0px";
                    clearInterval(radierenIntervall);
                    deleteRadierenOptions();
                }
                if(hoveranimation.radieren_ausführen == true) {
                    hoveranimation.radieren_ausführen = false;
                    radieren_button.animate(
                        [
                            {left: von},
                            {left: zu},
                        ],
                            {
                                duration: 130,
                                fill: 'forwards',
                            }
                    );  
                }
                    
            }

            function formenoptionsActivate(direction) {
                let formen_button = document.getElementById("formen");
                x_Button = formen_button.offsetLeft;
                y_Button = formen_button.offsetTop;
                buttonposition = formen_button.getBoundingClientRect();
                if(direction == "left" && hoveranimation.formen_button_position == "right") {
                    hoveranimation.formen_button_position = "left";
                    hoveranimation.formen_ausführen = true;
                    von = "0px";
                    zu = "-60px";
                    x_Button = formen_button.offsetLeft;
                    y_Button = formen_button.offsetTop;
                    formenIntervall = window.setInterval(formenoptionsActivate, 200);
                    createFormenOptions(x_Button, y_Button);
                } 
                else if(hoveranimation.formen_button_position == "left" && informenoptions(buttonposition) == false) {
                    hoveranimation.formen_button_position = "right";
                    hoveranimation.formen_ausführen = true;
                    von = "-60px";
                    zu = "0px";
                    clearInterval(formenIntervall);
                    deleteFormenOptions();
                }
                if(hoveranimation.formen_ausführen == true) {
                    hoveranimation.formen_ausführen = false;
                    formen_button.animate(
                        [
                            {left: von},
                            {left: zu},
                        ],
                            {
                                duration: 130,
                                fill: 'forwards',
                            }
                    );  
                }
            }

//--------------------------------------------------
//neues Element in DOM einfügen/entfernen

            function createZeichnenOptions(x, y) {
                xvonAltenZeichnenOptions = x;
                yvonAltenZeichnenOptions = y;
                const div = document.getElementById("zeichnenoptions_div");
                $("#zeichnenoptions_div").css('left', x+95);
                $("#zeichnenoptions_div").css('top', y)
                div.style.backgroundColor = "#66cdab5d"
                div.style.borderLeft = "5px solid black";


                const ul = document.createElement("ul");
                ul.id = "ulzeichnen"
                div.appendChild(ul);

                const list1Element = document.createElement("li");
                list1Element.id = "zeichnen_list1";
                list1Element.width = "100%";
                const list2Element = document.createElement("li");
                list2Element.id = "zeichnen_list2";
                list2Element.width = "100%";
                const list3Element = document.createElement("li");
                list3Element.id = "zeichnen_list3";
                list3Element.width = "100%";
                const list4Element = document.createElement("li");
                list3Element.id = "zeichnen_list4";
                list3Element.width = "100%";

                ul.appendChild(list1Element);
                ul.appendChild(list2Element);
                ul.appendChild(list3Element);
                ul.appendChild(list4Element);

                //Farbbuttons werden erstellt
                const Farbe1 = document.createElement("button");
                const Farbe2 = document.createElement("button");
                const Farbe3 = document.createElement("button");
                const Farbe4 = document.createElement("button");
                const Farbe5 = document.createElement("button");
                const Farbe6 = document.createElement("button");
                const Farbe7 = document.createElement("button");
                const Farbe8 = document.createElement("button");
                const Farbe9 = document.createElement("button");
                farbbuttons = [Farbe1, Farbe2, Farbe3, Farbe4, Farbe5, Farbe6, Farbe7, Farbe8, Farbe9];
                
                Farbe1.id = "red";
                Farbe2.id = "black";
                Farbe3.id = "green";
                Farbe4.id = "blue";
                Farbe5.id = "yellow";
                Farbe6.id = "white";
                Farbe7.id = "pink";
                Farbe8.id = "orange";
                Farbe9.id = "grey";
                
                for(var i = 0; i < farbbuttons.length; i++) {
                    Farbe = farbbuttons[i];
                    Farbe.className = "colorbuttons"
                    Farbe.style.backgroundColor = farbbuttons[i].id;
                    Farbe.innerHTML = ".";
                }

                //Schriftgröße (input) wird erstellt
                const Schriftgröße = document.createElement("input");
                Schriftgröße.id = "schriftgröße"
                Schriftgröße.placeholder = "Schriftgröße: " + strichdicke;
                Schriftgröße.style.color = "black";


                list1Element.appendChild(Farbe1);   
                list1Element.appendChild(Farbe2);
                list1Element.appendChild(Farbe3);

                list2Element.appendChild(Farbe4);
                list2Element.appendChild(Farbe5);
                list2Element.appendChild(Farbe6);
                
                list3Element.appendChild(Farbe7);
                list3Element.appendChild(Farbe8);
                list3Element.appendChild(Farbe9);

                list4Element.appendChild(Schriftgröße);
                
                
                for(var i = 0; i < farbbuttons.length; i++) {
                    Farbe = farbbuttons[i]
                    if(Farbe.id == farbe) {
                        mainfarbSwitch("keine", Farbe.id);
                    }
                }
                createzeichneninputListener();
                createfarbbuttonListener();
                return
            }

            function deleteZeichnenOptions() {
                const element = document.getElementById("zeichnenoptions_div");
                const ulzeichnen = document.getElementById("ulzeichnen")
                element.removeChild(ulzeichnen)
                return
            }
            
            function createRadierenOptions(x, y) {
                xvonAltenRadierOptions = x;
                yvonAltenRadierOptions = y;
                const div = document.getElementById("radieroptions_div");
                $("#radieroptions_div").css('left', x+95);
                $("#radieroptions_div").css('top', y)
                div.style.backgroundColor = "#66cdab5d"
                div.style.borderLeft = "5px solid black";
                
                const ul = document.createElement("ul");
                ul.id = "ulradieren"
                div.appendChild(ul);
                
                const list1Element = document.createElement("li");
                list1Element.id = "radieren_list1";
                list1Element.width = "100%";
                
                ul.appendChild(list1Element);
                
                const Radiergröße = document.createElement("input");
                Radiergröße.id = "radiergröße";
                Radiergröße.placeholder = "Radiergröße: " + radierdicke;
                Radiergröße.style.color = "black";

                list1Element.appendChild(Radiergröße);

                createradiereninputListener();
                return
            }

            function deleteRadierenOptions() {
                const element = document.getElementById("radieroptions_div");
                const ulzeichnen = document.getElementById("ulradieren");
                element.removeChild(ulzeichnen);
                return
            }

            function createFormenOptions(x, y) {
                xvonAltenZeichnenOptions = x;
                yvonAltenZeichnenOptions = y;
                const div = document.getElementById("formenoptions_div");
                $("#formenoptions_div").css('left', x+95);
                $("#formenoptions_div").css('top', y)
                div.style.backgroundColor = "#66cdab5d"
                div.style.borderLeft = "5px solid black";

                const table = document.createElement("table");
                    table.className = "tabelle"
                    table.id = "formentabel";
                div.appendChild(table);

                const row1 = document.createElement("tr");
                row1.id = "row1formen";
                const row2 = document.createElement("tr");
                row2.id = "row2formen";

                alleRows = [row1, row2];
                for(var i = 0; i < alleRows.length; i++) {
                    row = alleRows[i];
                    row.className = "formrows";
                    table.appendChild(row);
                }

                const column1row1Element = document.createElement("th");
                column1row1Element.id = "column1row1";
                column1row1Element.width = "33%";
                const column2row1Element = document.createElement("th");
                column2row1Element.id = "column2row1";
                column2row1Element.width = "33%";
                const column3row1Element = document.createElement("th");
                column3row1Element.id = "column3row1";
                column3row1Element.width = "34%";

                const column1row2Element = document.createElement("td");
                column1row2Element.id = "column1row1";
                column1row2Element.width = "33%";

                row1.appendChild(column1row1Element);
                row1.appendChild(column2row1Element);
                row1.appendChild(column3row1Element);

                row2.appendChild(column1row2Element);

                const Square = document.createElement("button");
                Square.innerHTML = "Box";
                const Line = document.createElement("button");
                Line.innerHTML = "Linie";
                const Circle = document.createElement("button");
                Circle.innerHTML = "Kreis";
                const Besonders = document.createElement("button");
                Besonders.innerHTML = "Besonders";
                
                
                Square.id = "square";
                Line.id = "line";
                Circle.id = "circle";
                Besonders.id = "besonders";

                //für alle festgelegte Eigenschaften:
                alleFormen = [Square, Line, Circle, Besonders];
                for(var i = 0; i < alleFormen.length; i++) {
                    Form = alleFormen[i]
                    Form.className = "formButtons";
                    if(Form.id == aktuelleForm) {
                        Form.style.backgroundColor = "red";
                    }
                }


                column1row1Element.appendChild(Square);
                column2row1Element.appendChild(Line);
                column3row1Element.appendChild(Circle);
                column1row2Element.appendChild(Besonders);
                
                createformenbuttonListener(alleFormen);
                return
            }

            function deleteFormenOptions() {
                const element = document.getElementById("formenoptions_div");
                const table = document.getElementById("formentabel");
                element.removeChild(table);
                return
            }

//--------------------------------------------------
//tools ausführen
            
            function dozeichnen(x, y) {
                ctx.beginPath();
                ctx.fillStyle = farbe;
                ctx.arc(x, y, strichdicke/2, 0, 2*Math.PI);
                ctx.fill();
                ctx.beginPath();
                ctx.strokeStyle = farbe;
                ctx.lineWidth = strichdicke;
                ctx.moveTo(x, y);
                ctx.lineTo(vorherigesx, vorherigesy);
                ctx.stroke();
                vorherigesx = x;
                vorherigesy = y;
            }

            function doradieren(x, y) {
                ctx.globalCompositeOperation = 'destination-out';
                ctx.arc(vorherigesx, vorherigesy, radierdicke, 0, 2*Math.PI);
                ctx.fill();

                ctx.beginPath();
                ctx.strokeStyle = hintergrundfarbe;
                ctx.lineWidth = 2*radierdicke;
                ctx.moveTo(x, y);
                ctx.lineTo(vorherigesx, vorherigesy);
                ctx.stroke();
                ctx.globalCompositeOperation = 'source-over';

                ctx.beginPath();
                ctx.fillStyle = "white";
                ctx.arc(x, y, radierdicke-2, 0, 2*Math.PI);
                ctx.fill();

                ctx.strokeStyle = "black"
                ctx.lineWidth = 1;
                ctx.strokeWidth = 1;
                ctx.arc(x, y, radierdicke-2, 0, 2*Math.PI);
                ctx.stroke();

                vorherigesx = x;
                vorherigesy = y;
            }

            function doformen(x, y) {
                xstart = vorherigesx_can2;
                ystart = vorherigesy_can2;
                ctx2.beginPath();
                ctx2.strokeWidth = strichdicke;
                ctx2.lineWidth = strichdicke;
                ctx2.strokeStyle = farbe;   
                ctx2.fillStyle = farbe;
                if(aktuelleForm == "square") {
                    //Viereck
                    if(x < xstart) {
                        if(y < ystart) {
                            //x < xs und y < ys
                            ctx2.rect(xstart, ystart, x-xstart, y-ystart)
                            letzteForm.form = "square";
                            letzteForm.cords = [xstart, ystart, x-xstart, y-ystart];
                        }
                        else {
                            //x < xs und y > ys
                            ctx2.rect(xstart, y, x-xstart, ystart-y)
                            letzteForm.form = "square";
                            letzteForm.cords = [xstart, y, x-xstart, ystart-y]
                        }
                    } else {
                        if (y > ystart) {
                            //x > xs und y > ys
                            ctx2.rect(x, ystart, xstart-x, y-ystart)
                            letzteForm.form = "square";
                            letzteForm.cords = [x, ystart, xstart-x, y-ystart]
                        } else {
                            //x > xs und y < ys
                            ctx2.rect(x, y, xstart-x, ystart-y)
                            letzteForm.form = "square";
                            letzteForm.cords = [x, y, xstart-x, ystart-y]
                        }
                    }
                    ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                }
                //Linie
                else if(aktuelleForm == "line") {
                    ctx2.moveTo(xstart, ystart);
                    ctx2.lineTo(x, y);
                    ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                    letzteForm.form = "line";
                    letzteForm.cords = [xstart, ystart, x, y];
                }
                //Kreis
                else if(aktuelleForm == "circle") {
                    radius = Math.sqrt(Math.pow((x-xstart), 2) + Math.pow((y-ystart), 2));
                    ctx2.arc(xstart, ystart, radius, 0, 2*Math.PI);
                    ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                    letzteForm.form = "circle";
                    letzteForm.cords = [xstart, ystart, radius];
                }
                //Besonders
                else if(aktuelleForm == "besonders") {
                    letzteForm.form = "besonders";
                    ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                    if(besondereForm.start.length == 2) {
                        if(entfernung(x, y, besondereForm.start[0], besondereForm.start[1]) < 20) {
                            x = besondereForm.start[0];
                            y = besondereForm.start[1];
                        }
                        ctx2.moveTo(besondereForm.aktuellePosition[0], besondereForm.aktuellePosition[1]);
                        ctx2.lineTo(x, y);
                    }
                    if(mousedown_can2 == true) {

                        besondereForm.aktuellePosition = [x, y]
                        besondereForm.positionen.push([x, y]);

                        ctx.beginPath();
                        ctx.fillStyle = farbe;
                        ctx.lineWidth = strichdicke;
                        ctx.arc(x, y, (strichdicke/2), 0, 2*Math.PI);
                        ctx.fill()
                        
                        if(besondereForm.start.length != 2) {
                            besondereForm.start = [x, y];
                        } else {
                            letzteForm.cords = [besondereForm.positionen[besondereForm.positionen.length-2][0], besondereForm.positionen[besondereForm.positionen.length-2][1], besondereForm.aktuellePosition[0], besondereForm.aktuellePosition[1]]
                            doformenOnMain();
                            if(x == besondereForm.start[0] && y == besondereForm.start[1]) {
                                besondereForm.start = [];
                                besondereForm.aktuellePosition = [];
                                besondereForm.positionen = [];
                                savetobackup();
                            }
                        }
                    }
                }
                ctx2.stroke();
            }

            function doformenOnMain() {
                ctx.beginPath();
                ctx.strokeStyle = farbe;
                ctx.strokeWidth = strichdicke;
                ctx.lineWidth = strichdicke;
                ctx.fillStyle = farbe;
                if(aktuelleForm == "square") {
                    ctx.rect(letzteForm.cords[0], letzteForm.cords[1], letzteForm.cords[2], letzteForm.cords[3]);
                }
                else if(aktuelleForm == "line") {
                    ctx.moveTo(letzteForm.cords[0], letzteForm.cords[1]);
                    ctx.lineTo(letzteForm.cords[2], letzteForm.cords[3]);
                }
                else if(aktuelleForm == "circle") {
                    ctx.arc(letzteForm.cords[0], letzteForm.cords[1], letzteForm.cords[2], 0, 2*Math.PI);
                }
                else if(aktuelleForm == "besonders") {
                    ctx.moveTo(letzteForm.cords[0], letzteForm.cords[1]);
                    ctx.lineTo(letzteForm.cords[2], letzteForm.cords[3]);
                }
                ctx.stroke();
                if(aktuelleForm != "besonders") {
                    savetobackup();
                }
            }

            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx2.clearRect(0, 0, canvas.width, canvas.height);
                return
            }

//--------------------------------------------------
//aussehen
            function displayMousepos(x, y) {
                text = "X: " + x + ", " + "Y: " + y
                document.getElementById("currentpos").innerHTML = text
            }

//--------------------------------------------------
//event listener
            canvas.addEventListener('mousemove', function(evt) {
                try {
                    let rect = canvas.getBoundingClientRect();
                    var pos = {
                        x: evt.clientX - rect.left,
                        y: evt.clientY - rect.top,
                    }
                    x = Math.floor(pos.x);
                    y = Math.floor(pos.y);
                    displayMousepos(x, y)
                    if(zeichnen == true && mousedown == true) {
                        dozeichnen(x, y);
                    }
                    if(radieren == true && mousedown == true) {
                        doradieren(x, y);
                    }
                    if(formen == true && mousedown == true && aktuelleForm != "besonders") {
                        doformen(x, y)
                    }
                }
                catch {
                    return
                }
            })
         
            canvas.addEventListener('mousedown', function(evt) {
                let rect = canvas.getBoundingClientRect();
                var pos = {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top,
                }
                x = Math.floor(pos.x);
                y = Math.floor(pos.y);
                mousedown = true
                //zum Malen um die letze Position zu finden

                if(malennachZahlen == true) {
                    connectNumbers(x, y);
                }

                vorherigesx = x;
                vorherigesy = y;
            });

            canvas.addEventListener('mouseup', function(evt) {
                let rect = canvas.getBoundingClientRect();
                var pos = {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top,
                }
                x = Math.floor(pos.x);
                y = Math.floor(pos.y);
                mousedown = false;
                if(radieren == true) {
                    ctx.globalCompositeOperation = 'destination-out';
                    ctx.beginPath();
                    ctx.arc(x, y, radierdicke, 0, 2*Math.PI);
                    ctx.fill();
                    ctx.globalCompositeOperation = 'source-over';
                }
                if(radieren == true || zeichnen == true || formen == true || malennachZahlen == true) {
                    savetobackup()
                }
            });
                    
            [...document.querySelectorAll(".js-noMenu")].forEach( el => 
            el.addEventListener('contextmenu', e => e.preventDefault())
            );
            
            //canvas2 Listener
            canvas2.addEventListener('mousemove', function(evt) {
                try {
                    let rect = canvas2.getBoundingClientRect();
                    var pos = {
                        x: evt.clientX - rect.left,
                        y: evt.clientY - rect.top,
                    }
                    xcan2 = Math.floor(pos.x);
                    ycan2 = Math.floor(pos.y);
                    displayMousepos(xcan2, ycan2)
                    if(zeichnen == true && mousedown_can2 == true) {
                        dozeichnen(xcan2, ycan2);
                    }
                    if(radieren == true && mousedown_can2 == true) {
                        doradieren(xcan2, ycan2);
                    }
                    if(formen == true && (mousedown_can2 == true || aktuelleForm == "besonders")) {
                        doformen(xcan2, ycan2)
                    }
                }
                catch {
                    return
                }
            })
            //canvas2 Listener
            canvas2.addEventListener('mousedown', function(evt) {
                let rect = canvas2.getBoundingClientRect();
                var pos = {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top,
                }
                xcan2 = Math.floor(pos.x);
                ycan2 = Math.floor(pos.y);
                mousedown_can2 = true
                 
                //zum Malen um die letze Psoition zu finden
                vorherigesx_can2 = xcan2;
                vorherigesy_can2 = ycan2;
                doformen(xcan2, ycan2);
            });
            //canvas2 Listener
            canvas2.addEventListener('mouseup', function(evt) {
                let rect = canvas2.getBoundingClientRect();
                var pos = {
                    x: evt.clientX - rect.left,
                    y: evt.clientY - rect.top,
                }
                xcan2 = Math.floor(pos.x);
                ycan2 = Math.floor(pos.y);
                mousedown_can2 = false;
                if(radieren == true) {
                    ctx2.beginPath();
                    ctx2.arc(x, y, radierdicke, 0, 2*Math.PI);
                    ctx2.fillStyle = hintergrundfarbe;
                    ctx2.fill();
                }
                if(aktuelleForm != "besonders") {
                    doformenOnMain();
                }
            });

            window.addEventListener('mousemove', function(evt){
                var pos = {
                    x: evt.clientX,
                    y: evt.clientY,
                }
                mausposX = pos.x;
                mausposY = pos.y;
            });

            function createfarbbuttonListener() {
                for(var i = 0; i < farbbuttons.length; i++) {
                    element = document.getElementById(farbbuttons[i].id);
                    element.addEventListener('click', function(){
                        altefarbe = farbe;
                        farbe = String(this.id);
                        mainfarbSwitch(altefarbe, this.id);
                        activeSettings();
                        if(xvonAltenOptions != undefined && yvonAltenOptions != undefined) {
                            deleteZeichnenOptions();
                            createZeichnenOptions(xvonAltenOptions, yvonAltenOptions);
                        }
                    })
                }
            }

            function createzeichneninputListener() {
                sizeinput = document.getElementById("schriftgröße");
                sizeinput.addEventListener('input', function(evt){
                    numberUnedited = sizeinput.value;
                    number = numberUnedited.replace(",", ".")
                    if(Number.isInteger(Number(number))) {
                        strichdicke = parseInt(number)
                        activeSettings();
                    }
                })
                return
            }

            function createradiereninputListener() {
                sizeinput = document.getElementById("radiergröße");
                sizeinput.addEventListener('input', function(evt){
                    numberUnedited = sizeinput.value;
                    number = numberUnedited.replace(",", ".")
                    if(Number.isInteger(Number(number))) {
                        radierdicke = parseInt(number)
                        activeSettings();
                    }
                })
                return
            }
            
            function createformenbuttonListener(alleFormen) {
                for(var i = 0; i < alleFormen.length; i++) {
                    element = document.getElementById(alleFormen[i].id);
                    element.addEventListener('click', function() {
                        formenActivate("ohne deaktivieren");
                        alteForm = document.getElementById(aktuelleForm);
                        alteForm.style.backgroundColor= "#66CDAA";
                        aktuelleForm = this.id;
                        this.style.backgroundColor = "red";
                        activeSettings();
                    })
                }
                
                return
            }

            window.addEventListener('resize', function() {
                canvas2erstellen();
                setTimeout(canvas2erstellen, 50);
                sidebarEinstellungen();
                setTimeout(sidebarEinstellungen, 50);
                activeSettings();
                setTimeout(activeSettings, 50);
                bilderTable();
                setTimeout(bilderTable, 50);
            })

            sidebar.addEventListener('mouseenter', function() {
                canvas2.style.setProperty('--canvas2-z-index', 0)
            })

            sidebar.addEventListener('mouseleave', function() {
                if(formen == true) {
                    canvas2.style.setProperty('--canvas2-z-index', 3)
                }
            })

            window.addEventListener("keydown", function(event) {
                if(event.keyCode == 90 && event.ctrlKey == true) {
                    event.preventDefault();
                    goback();
                }
                if(event.keyCode == 89 && event.ctrlKey == true) {
                    event.preventDefault();
                    goforward();
                }
            })
//--------------------------------------------------
//hilfreiche Funktionen

            function inzeichnenoptions(buttonposition) {
                optiondivgröße = document.getElementById("zeichnenoptions_div").getBoundingClientRect();
                if(mausposY >= buttonposition.top && mausposY <= buttonposition.bottom && mausposX >= buttonposition.left && mausposX <= optiondivgröße.right) {
                    return true
                }
                else if(mausposY >= buttonposition.top && mausposY <= optiondivgröße.bottom && mausposX >= buttonposition.right && mausposX <= optiondivgröße.right) {
                    return true
                }
                else {
                    return false
                }
            }

            function inradierenoptions(buttonposition) {
                optiondivgröße = document.getElementById("radieroptions_div").getBoundingClientRect();
                if(mausposY >= buttonposition.top && mausposY <= buttonposition.bottom && mausposX >= buttonposition.left && mausposX <= optiondivgröße.right) {
                    return true
                }
                else if(mausposY >= buttonposition.top && mausposY <= optiondivgröße.bottom && mausposX >= buttonposition.right && mausposX <= optiondivgröße.right) {
                    return true
                }
                else {
                    return false
                }
            }
            
            function informenoptions(buttonposition) {
                optiondivgröße = document.getElementById("formenoptions_div").getBoundingClientRect();
                if(mausposY >= buttonposition.top && mausposY <= buttonposition.bottom && mausposX >= buttonposition.left && mausposX <= optiondivgröße.right) {
                    return true
                }
                else if(mausposY >= buttonposition.top && mausposY <= optiondivgröße.bottom && mausposX >= buttonposition.right && mausposX <= optiondivgröße.right) {
                    return true
                }
                else {
                    return false
                }
            }
            
            function mainfarbSwitch(altefarbe, id) {
                if(altefarbe != "keine") {
                    mainalteFarbe = document.getElementById(altefarbe);
                    mainalteFarbe.style.border = "none";
                    mainalteFarbe
                }
                mainFarbe = document.getElementById(id);
                mainFarbe.style.border = "solid";
                mainFarbe.style.borderColor = "white";
                mainFarbe.style.borderWidth = "2px";
                buttonBorderReload()
                return
            }

            function buttonBorderReload() {
                const btns = document.querySelectorAll(".colorbuttons");
                btns.forEach((button) => {
                    button.style.setProperty('--button-animation-border', 'solid');
                    button.style.setProperty('--button-animation-borderColor', 'white');
                    button.style.setProperty('--button-animation-borderWidth', '1px');
                })
                return
            }

            function posinRect(x, y, rect) {
                if(x >= rect.left-1 && x <= rect.right+1 && y >= rect.top-1 && y <= rect.bottom+1) {
                    return true
                } else {
                    return false
                }
            }

            function entfernung(xstart, ystart, x, y) {
                return Math.sqrt(Math.pow(xstart - x, 2) + Math.pow(ystart - y, 2))
            }

//--------------------------------------------------
//sidebar
            function sidebarEinstellungen() {
                const sidebar = document.getElementById("sidebar");
                const überschrift = document.getElementById("überschrift");
                const h1Position = überschrift.getBoundingClientRect();
                sidebar.style.setProperty('--sidebar-top', h1Position.bottom+4+"px");
                return
            }
            sidebarEinstellungen()

            function hintergrundAusklappen(who) {
                let sidebarContainer2 = document.getElementById("sidebar-container-2");
                let sidebarButtonbg = document.getElementById("hintergrund_btn");

                if(who == "klick") {
                    ausklappentimer1 = window.setInterval(hintergrundAusklappen, 100);
                    sidebarContainer2.style.visibility = "visible";
                }
                
                if(posinRect(mausposX, mausposY, sidebarButtonbg.getBoundingClientRect()) == true || posinRect(mausposX, mausposY, sidebarContainer2.getBoundingClientRect()) == true) {
                    return
                } else {
                    sidebarContainer2.style.visibility = "hidden";
                    clearInterval(ausklappentimer1);
                }
            }

            function ansichtAusklappen(who) {
                let sidebarContainer3 = document.getElementById("sidebar-container-3");
                let sidebarButtonAnsicht = document.getElementById("ansicht_btn");
                buttonBCR = sidebarButtonAnsicht.getBoundingClientRect();
                sidebarContainer3.style.setProperty('--sidebar-container-3-top', buttonBCR.top+"px");
                if(who == "klick") {
                    ausklappentimer2 = window.setInterval(ansichtAusklappen, 100);
                    sidebarContainer3.style.visibility = "visible";
                }
                
                if(posinRect(mausposX, mausposY, sidebarButtonAnsicht.getBoundingClientRect()) == true || posinRect(mausposX, mausposY, sidebarContainer3.getBoundingClientRect()) == true) {
                    return
                } else {
                    sidebarContainer3.style.visibility = "hidden";
                    clearInterval(ausklappentimer2);
                }
            }

            function bgChanger(farbe) {
                canvas.style.backgroundColor = farbe;
                hintergrundfarbe = farbe;
                savetobackup()
                return
            }
//malen nach Zahlen
            function malennachzahlenActivate() {
                canvas.style.backgroundColor = "white";
                hintergrundfarbe = "white";
                connectNumber.NummernAnzahl = 60;
                felderstellen(connectNumber.NummernAnzahl);
                zahlenaufCanvas(connectNumber.NummernAnzahl);
                mnZActivate();
            }

            function felderstellen(größe) {
                var xList = [];
                var yList = [];
                var randomX = [];
                var randomY = [];
                for(var i = 0; i < größe; i++) {
                    do {
                        abbrechen = false;
                        randomXdiv20 = Math.floor(Math.random() * ((canvas.width-70)/20)-1);
                        randomYdiv20 = Math.floor(Math.random() * ((canvas.height-70)/20)-1);
                        if(xList.includes(randomXdiv20) == false || yList.includes(randomYdiv20) == false) {
                            xList.push(randomXdiv20);
                            yList.push(randomYdiv20);
                            abbrechen = true;
                        }
                    } while (abbrechen == false);
                    randomX = ((randomXdiv20* 20) +60);
                    randomY = ((randomYdiv20* 20) +60);
                    zahlenCords[i] = [randomX, randomY];
                }
                return
            }

            function zahlenaufCanvas(größe) {
                clearCanvas();
                ctx.font = "bold 16px Arial"
                for(var i = 0; i < größe; i++) {
                    textFarbe = randomFarben[Math.floor(Math.random() * (randomFarben.length - 1))];
                    ctx.fillStyle = textFarbe;
                    ctx.fillText(i+1, zahlenCords[i][0], zahlenCords[i][1])
                }
                savetobackup();
                return
            }

            function connectNumbers() {
                momentanerKlickbereich = zahlenCords[connectNumber.aktuelleNummer];
                numberRect = {
                    top: momentanerKlickbereich[1]-10,
                    right: momentanerKlickbereich[0]+20,
                    bottom: momentanerKlickbereich[1],
                    left: momentanerKlickbereich[0],
                }
                if(posinRect(x, y, numberRect) == true) {
                    connectNumber.aktuelleNummer = connectNumber.aktuelleNummer + 1;

                    ctx.beginPath();
                    ctx.strokeStyle = "black";
                    ctx.lineWidth = 1;
                    ctx.globalCompositeOperation = "destination-over";
                    if(connectNumber.aktuelleNummer < 10) {
                        ctx.moveTo(momentanerKlickbereich[0], momentanerKlickbereich[1]+2)
                        ctx.lineTo(momentanerKlickbereich[0]+10, momentanerKlickbereich[1]+2)
                    } else {
                        ctx.moveTo(momentanerKlickbereich[0], momentanerKlickbereich[1]+2)
                        ctx.lineTo(momentanerKlickbereich[0]+20, momentanerKlickbereich[1]+2)
                    }
                    ctx.stroke()
                    if(connectNumber.aktuelleNummer-1 != 0) {
                        ctx.beginPath()
                        ctx.strokeStyle = "black";
                        ctx.lineWidth = 1;
                        ctx.moveTo((momentanerKlickbereich[0]+5), (momentanerKlickbereich[1]-5));
                        ctx.lineTo((zahlenCords[connectNumber.aktuelleNummer-2][0]+5), (zahlenCords[connectNumber.aktuelleNummer-2][1]-5));
                        ctx.stroke();
                    }
                    ctx.globalCompositeOperation = "source-over";
                }
            }
        
//--------------------------------------------------
//backups
            function savetobackup(){
                backups.src.splice(backupPosition+1, Infinity);
                backups.bg.splice(backupPosition+1, Infinity);

                backups.src.push(canvas.toDataURL("image/png"));
                backups.bg.push(hintergrundfarbe);

                backupPosition = backups.src.length-1;
                return
            }

            function goback() {
                clearCanvas();
                img = new Image();
                img.onload = function() {
                    ctx.drawImage(img, 0, 0)
                }
                backupPosition = backupPosition-1;
                img.src = backups.src[backupPosition];
                canvas.style.backgroundColor = backups.bg[backupPosition];
                return
            }
        
            function goforward() {
                if(backupPosition != backups.src.length-1) {
                    clearCanvas();
                    img = new Image();
                    img.onload = function() {
                        ctx.drawImage(img, 0, 0)
                    }
                    backupPosition = backupPosition+1;
                    img.src = backups.src[backupPosition];
                    canvas.style.backgroundColor = backups.bg[backupPosition];
                }
                
                return
            }

            function bildschirmFoto() {
                canscreens.push(backups.src[backups.src.length-1])
                hintergrundlist.push(backups.bg[backups.bg.length-1])
                screens = canscreens;
                bgslist = hintergrundlist;
                console.log(bgslist)
                var i = 0;
                [...document.querySelectorAll(".bilder")].forEach(function(element) {
                    console.log(i)
                    if(bgslist.reverse()[i] != undefined) {
                        $(element).attr('src', screens.reverse()[i]);
                        $(element).css({backgroundColor: bgslist.reverse()[i]})
                    }
                    
                    i++;
                });
            }
            
            //--------------------------------------------------
//JQuery
            //Pfeile in der Sidebar
            $('.sidebar-elements').hover(function() {
                $(this).prev().css('right', 0);
                }, function() {
                $(this).prev().css('right', '4.5%');
            })
            $(document).ready(function() {
                $('.sidebar-elements').on('mousedown', function() {
                    $(this).prev().css('transition', '0.1s');
                    $(this).prev().css('right', '-5px');
                });
                $('.sidebar-elements').on('mouseup', function() {
                    $(this).prev().css('right', '0');
                    $(this).prev().css('transition', '0.5s');
                });
            });
            
        </script>
        
        <footer>
            </script> </script>
        </footer>
    </body>
</html>